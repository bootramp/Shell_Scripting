#!/bin/bash

PROXY_ADDR="http://192.168.35.10:3128"
NO_PROXY_LIST="localhost,127.0.0.1,::1"

ENV_LINES=(
"http_proxy=\"$PROXY_ADDR\""
"https_proxy=\"$PROXY_ADDR\""
#"ftp_proxy=\"$PROXY_ADDR\""
#"no_proxy=\"$NO_PROXY_LIST\""
)

PROFILE_LINES=(
"export http_proxy=\"$PROXY_ADDR\""
"export https_proxy=\"$PROXY_ADDR\""
#"export ftp_proxy=\"$PROXY_ADDR\""
#"export no_proxy=\"$NO_PROXY_LIST\""
)

#echo "📝 در حال تنظیم /etc/environment ..."
for line in "${ENV_LINES[@]}"; do
    grep -qxF "$line" /etc/environment || echo "$line" | sudo tee -a /etc/environment > /dev/null
done

#echo "📝 در حال تنظیم /etc/profile ..."
for line in "${PROFILE_LINES[@]}"; do
    grep -qxF "$line" /etc/profile || echo "$line" | sudo tee -a /etc/profile > /dev/null
done

#echo "✅ تنظیمات انجام شد. لطفاً یک‌بار logout و login کن یا دستور زیر رو بزن:"
echo "Log out once and then log in again!"
echo "    source /etc/environment && source /etc/profile"
echo "با دستور زير ببين توي متغيير ها اضافه شده يا نه"
echo "env | grep -i proxy"
